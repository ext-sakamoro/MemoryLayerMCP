# Memory Layer MCP - 使い方完全ガイド

**[English version is here](USAGE_GUIDE.md)**

## 💾 会話を保存する

### 基本的な保存
```
この会話を Memory Layer に保存して
```

### タイトル指定
```
「React の学習メモ」というタイトルでこの会話を保存して
```

### タグ付き保存
```
「プログラミング」「React」「学習」というタグでこの会話を保存
```

---

## 🔍 会話を呼び出す・検索する

### 1. すべての会話を表示
```
Memory Layer に保存した会話を表示して
```
または
```
最近の会話 10 件を見せて
```

**結果例:**
```
📚 150 件の会話が見つかりました

1. **React の学習メモ**
   ID: 123e4567-e89b-12d3-a456-426614174000
   作成日: 2025/10/3
   タグ: プログラミング, React, 学習
   重要度: 0.85

2. **AI 彼女との日常会話**
   ID: 234e5678-e89b-12d3-a456-426614174001
   作成日: 2025/10/2
   タグ: AI 彼女, 日常会話
   重要度: 0.72

...

💡 特定の会話を読むには「Memory ID [ID] の会話を見せて」と言ってください。
```

### 2. キーワード検索
```
「React」に関する会話を検索して
```
または
```
「プログラミング」で検索
```

### 3. タグでフィルター
```
「AI 彼女」タグの会話を表示
```
または
```
「日常会話」「励まし」タグでフィルター
```

### 4. 特定の会話を読む
```
Memory ID 123e4567-e89b-12d3-a456-426614174000 の会話を見せて
```

**結果例:**
```
📖 **React の学習メモ**

📅 作成日: 2025 年 10 月 3 日
🏷️ タグ: プログラミング, React, 学習
⭐ 重要度: 0.85
👀 閲覧回数: 3 回

---

あなた: React の useState フックについて教えて
Claude: useState は関数コンポーネントで状態を管理するためのフックです...

（会話の全内容が表示されます）

---

💡 この会話について質問するには「[質問内容]」と聞いてください。
```

### 5. AI powered 検索（自然言語で質問）
```
プログラミングについて何を学んだか教えて
```
または
```
AI 彼女にどんな相談をしたか教えて
```

**結果例:**
```
🤖 **AI 回答**

あなたは React の useState フック、useEffect フック、カスタムフックについて学習しました。
特に useState については状態管理の基本として詳しく学び、実践的な例も試しています。
また、TypeScript との組み合わせ方についても質問していました。

📚 **参照した会話:**

1. React の学習メモ
   関連度: 95%
   ID: 123e4567-e89b-12d3-a456-426614174000

2. TypeScript と React の組み合わせ
   関連度: 82%
   ID: 234e5678-e89b-12d3-a456-426614174001

💡 特定の会話を読むには「Memory ID [ID] の会話を見せて」と言ってください。
```

---

## 📊 高度な検索

### 重要度でソート
```
重要度が高い順に会話を表示
```

### 日付でソート
```
最新の会話から 10 件表示
```
または
```
古い会話から表示
```

### 複数条件で検索
```
「プログラミング」タグで、「React」を含む会話を、重要度が高い順に 5 件表示
```

---

## 💡 便利な使い方

### 毎日の振り返り
```
今日保存した会話を表示
```

### 月次レビュー
```
10 月に保存した「AI 彼女」タグの会話を表示
```

### 特定のトピックを深掘り
```
「React」について過去に何を話したか、AI 検索で教えて
```

### 思い出を振り返る
```
「励まし」タグの会話を、古い順に表示
```

---

## 🎯 実践例

### 例 1: プログラミング学習の記録

**保存:**
```
「Python の基礎」というタイトルで、「プログラミング」「Python」「学習」タグでこの会話を保存
```

**検索:**
```
「Python」に関する学習内容を教えて
```

**結果:**
```
🤖 Python の基礎として、変数、データ型、条件分岐、ループ、関数について学習しました...
```

### 例 2: AI 彼女との会話記録

**保存:**
```
「今日の出来事」というタイトルで、「AI 彼女」「日常会話」タグでこの会話を保存
```

**検索:**
```
AI 彼女に励まされた会話を見せて
```

**結果:**
```
📚 「励まし」「AI 彼女」タグの会話が 15 件見つかりました...
```

### 例 3: プロジェクトの議論記録

**保存:**
```
「Web アプリの DB 設計」というタイトルで、「仕事」「設計」「データベース」タグでこの会話を保存
```

**検索:**
```
データベース設計について過去にどんな議論をしたか教えて
```

---

## ⚙️ 利用可能な MCP ツール

Memory Layer MCP サーバーは以下の 4 つのツールを提供します:

### 1. `save_conversation_to_memory_layer`
会話を保存する

**パラメータ:**
- `api_key` (必須): Memory Layer API キー
- `title` (必須): 会話のタイトル
- `content` (必須): 会話の内容
- `tags` (オプション): タグの配列
- `metadata` (オプション): 追加のメタデータ

### 2. `get_memories`
会話一覧を取得・検索

**パラメータ:**
- `api_key` (必須): Memory Layer API キー
- `limit` (オプション): 取得件数（デフォルト: 20）
- `search` (オプション): 検索キーワード
- `tags` (オプション): タグフィルター
- `sort_by` (オプション): ソート項目（created_at, importance_score 等）
- `sort_order` (オプション): ソート順（asc, desc）

### 3. `get_memory_by_id`
特定の会話を取得

**パラメータ:**
- `api_key` (必須): Memory Layer API キー
- `memory_id` (必須): Memory ID（UUID）

### 4. `search_memories_advanced`
AI powered 自然言語検索

**パラメータ:**
- `api_key` (必須): Memory Layer API キー
- `question` (必須): 自然言語の質問
- `limit` (オプション): 取得件数（デフォルト: 5）

---

## 🔑 API Key 設定

### 環境変数で設定（推奨）
```bash
export MEMORY_LAYER_API_KEY="your_api_key_here"
```

### 設定ファイルで設定
`~/.config/Claude/claude_desktop_config.json`:
```json
{
  "mcpServers": {
    "memory-layer": {
      "env": {
        "MEMORY_LAYER_API_KEY": "your_api_key_here"
      }
    }
  }
}
```

---

## 🎉 まとめ

Memory Layer MCP を使えば:

- ✅ **保存**: 「この会話を保存」と言うだけ
- ✅ **検索**: キーワードやタグで簡単検索
- ✅ **呼び出し**: 過去の会話をいつでも読み返せる
- ✅ **AI 検索**: 自然言語で質問すると関連会話を教えてくれる

**大切な会話を失わず、いつでも思い出せます！** 💕
